<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>[Crumbl Crafts] Bloxburg Builder Hub - Stats, Leaderboards & Notifications</title>
  <meta name="description" content="You can view our builder shops stats, leaderboard and get various notifications. Not only that, we are adding new sections for our cooking department and roleplay department so you can enjoy Bloxburg to the fullest.">
  <link rel="canonical" href="https://crumbl-crafts.github.io/Bloxburg/home.html">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="[Crumbl Crafts] Bloxburg Builder Hub - Stats, Leaderboards & Notifications">
  <meta property="og:description" content="You can view our builder shops stats, leaderboard and get various notifications. Not only that, we are adding new sections for our cooking department and roleplay department so you can enjoy Bloxburg to the fullest.">
  <meta property="og:image" content="https://crumbl-crafts.github.io/Bloxburg/happy.gif">
  <meta property="og:image:alt" content="Crumbl Crafts mascot">
  <meta property="og:url" content="https://crumbl-crafts.github.io/Bloxburg/home.html">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="[Crumbl Crafts] Bloxburg Builder Hub - Stats, Leaderboards & Notifications">
  <meta name="twitter:description" content="You can view our builder shops stats, leaderboard and get various notifications. Not only that, we are adding new sections for our cooking department and roleplay department so you can enjoy Bloxburg to the fullest.">
  <meta name="twitter:image" content="https://crumbl-crafts.github.io/Bloxburg/happy.gif">
  <meta name="twitter:image:alt" content="Crumbl Crafts mascot">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>üç™</text></svg>" />
  <!-- Critical resource hints -->
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin />
  <link rel="dns-prefetch" href="https://fonts.googleapis.com" />
  <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com" />
  <link rel="preload" href="https://crumbl-crafts.github.io/Bloxburg/happy.gif" as="image" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" media="print" onload="this.media='all'" />
  <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" /></noscript>
  <link href="https://fonts.googleapis.com/css2?family=Kosugi+Maru&family=Noto+Sans+JP:wght@400;700;900&family=M+PLUS+Rounded+1c:wght@400;700;800&display=swap" rel="stylesheet" media="print" onload="this.media='all'" />
  <noscript><link href="https://fonts.googleapis.com/css2?family=Kosugi+Maru&family=Noto+Sans+JP:wght@400;700;900&family=M+PLUS+Rounded+1c:wght@400;700;800&display=swap" rel="stylesheet" /></noscript>
  <style>
    /* ===== PREMIUM JAPANESE CARTOON THEME ===== */
    :root {
      --primary: #FF3366;
      --secondary: #33A1FF;
      --accent: #FFD633;
      --neon-pink: #FF00FF;
      --neon-blue: #00FFFF;
      --neon-green: #00FF99;
      --dark-bg: #0A0A1A;
      --card-bg: rgba(20, 20, 40, 0.85);
      --glass: rgba(255, 255, 255, 0.1);
      --text: #FFFFFF;
      --text-muted: #B8B8FF;
      --border-glow: rgba(255, 51, 102, 0.5);
      --shadow-glow: rgba(51, 161, 255, 0.3);
      --jp-red: #DC143C;
      --jp-gold: #FFD700;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: 'Noto Sans JP', sans-serif;
      background: 
        radial-gradient(circle at 10% 20%, rgba(255, 51, 102, 0.15) 0%, transparent 20%),
        radial-gradient(circle at 90% 80%, rgba(51, 161, 255, 0.15) 0%, transparent 20%),
        radial-gradient(circle at 50% 50%, rgba(255, 214, 51, 0.1) 0%, transparent 25%),
        linear-gradient(135deg, #0A0A1A 0%, #1A1A2E 50%, #16213E 100%);
      color: var(--text);
      min-height: 100vh;
      overflow-x: hidden;
      position: relative;
      line-height: 1.6;
    }

    /* Animated Japanese wave pattern */
    .jp-wave-bg {
      position: fixed;
      width: 100%;
      height: 100%;
      z-index: 0;
      opacity: 0.3;
      background-image: 
        url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23FF3366' fill-opacity='0.2' fill-rule='evenodd'/%3E%3C/svg%3E");
      animation: waveMove 30s linear infinite;
    }

    @keyframes waveMove {
      0% { background-position: 0 0; }
      100% { background-position: 100px 100px; }
    }

    /* Neon grid effect */
    .neon-grid {
      position: fixed;
      width: 100%;
      height: 100%;
      background-image: 
        linear-gradient(rgba(255, 51, 102, 0.1) 1px, transparent 1px),
        linear-gradient(90deg, rgba(255, 51, 102, 0.1) 1px, transparent 1px);
      background-size: 50px 50px;
      z-index: 0;
      opacity: 0.2;
      animation: gridPulse 8s ease-in-out infinite alternate;
    }

    @keyframes gridPulse {
      0% { opacity: 0.1; }
      100% { opacity: 0.3; }
    }

    /* Floating particles */
    .particles {
      position: fixed;
      width: 100%;
      height: 100%;
      z-index: 1;
      pointer-events: none;
    }

    .particle {
      position: absolute;
      width: 3px;
      height: 3px;
      background: var(--neon-pink);
      border-radius: 50%;
      animation: particleFloat 20s infinite linear;
      opacity: 0.5;
    }

    @keyframes particleFloat {
      0% {
        transform: translateY(100vh) translateX(0);
        opacity: 0;
      }
      10% {
        opacity: 0.7;
      }
      90% {
        opacity: 0.7;
      }
      100% {
        transform: translateY(-100px) translateX(calc(100vw * var(--random-x)));
        opacity: 0;
      }
    }

    .wrapper {
      position: relative;
      z-index: 2;
      max-width: 1400px;
      margin: 0 auto;
      padding: 20px;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* ===== PREMIUM JAPANESE HEADER ===== */
    header.hero {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 30px;
      padding: 30px 40px;
      background: var(--card-bg);
      border-radius: 24px;
      border: 2px solid transparent;
      background-clip: padding-box;
      position: relative;
      margin-bottom: 50px;
      backdrop-filter: blur(10px);
      box-shadow: 
        0 20px 40px rgba(0, 0, 0, 0.4),
        inset 0 1px 0 rgba(255, 255, 255, 0.1),
        0 0 20px var(--border-glow);
      animation: headerGlow 3s ease-in-out infinite alternate;
    }

    @keyframes headerGlow {
      0% { box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.1), 0 0 20px var(--border-glow); }
      100% { box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.1), 0 0 30px var(--neon-pink); }
    }

    .logo-container {
      display: flex;
      align-items: center;
      gap: 25px;
    }

    .logo-icon {
      width: 80px;
      height: 80px;
      border-radius: 20px;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      display: grid;
      place-items: center;
      font-size: 36px;
      color: white;
      box-shadow: 
        0 10px 30px rgba(255, 51, 102, 0.4),
        inset 0 2px 0 rgba(255, 255, 255, 0.3),
        0 0 0 3px rgba(255, 255, 255, 0.1);
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      position: relative;
      overflow: hidden;
    }

    .logo-icon:hover {
      transform: scale(1.1) rotate(5deg);
      box-shadow: 
        0 15px 40px rgba(255, 51, 102, 0.6),
        inset 0 2px 0 rgba(255, 255, 255, 0.4),
        0 0 0 4px rgba(255, 255, 255, 0.2);
    }

    .logo-icon::after {
      content: '';
      position: absolute;
      width: 100%;
      height: 100%;
      background: linear-gradient(45deg, transparent 30%, rgba(255, 255, 255, 0.2) 50%, transparent 70%);
      transform: translateX(-100%);
      transition: transform 0.6s;
    }

    .logo-icon:hover::after {
      transform: translateX(100%);
    }

    .logo-text h1 {
      font-family: 'M PLUS Rounded 1c', sans-serif;
      font-size: 3.2rem;
      font-weight: 800;
      background: linear-gradient(90deg, var(--primary), var(--accent), var(--secondary));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      margin: 0;
      text-shadow: 0 0 30px rgba(255, 51, 102, 0.5);
      letter-spacing: 1px;
      position: relative;
    }

    .logo-text h1::after {
      content: '';
      position: absolute;
      bottom: -10px;
      left: 0;
      width: 100%;
      height: 4px;
      background: linear-gradient(90deg, var(--primary), var(--accent), var(--secondary));
      border-radius: 2px;
      animation: underlinePulse 2s ease-in-out infinite;
    }

    @keyframes underlinePulse {
      0%, 100% { opacity: 0.7; width: 100%; }
      50% { opacity: 1; width: 105%; }
    }

    .logo-text .tagline {
      font-family: 'Kosugi Maru', sans-serif;
      font-size: 1.2rem;
      color: var(--text-muted);
      margin-top: 15px;
      font-weight: 400;
      letter-spacing: 1.5px;
      position: relative;
      display: inline-block;
    }

    .tagline::before, .tagline::after {
      content: '‚ú¶';
      margin: 0 10px;
      color: var(--accent);
      animation: spin 4s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .header-cta {
      font-family: 'M PLUS Rounded 1c', sans-serif;
      text-decoration: none;
      font-weight: 700;
      padding: 16px 32px;
      border-radius: 16px;
      background: linear-gradient(45deg, var(--primary), var(--secondary));
      color: white;
      border: none;
      font-size: 1.1rem;
      box-shadow: 
        0 8px 25px rgba(255, 51, 102, 0.4),
        0 0 0 2px rgba(255, 255, 255, 0.1);
      transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      cursor: pointer;
      position: relative;
      overflow: hidden;
      letter-spacing: 1px;
      z-index: 1;
    }

    .header-cta::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(45deg, var(--secondary), var(--primary));
      transition: left 0.5s;
      z-index: -1;
    }

    .header-cta:hover {
      transform: translateY(-3px);
      box-shadow: 
        0 12px 35px rgba(255, 51, 102, 0.6),
        0 0 0 3px rgba(255, 255, 255, 0.2);
      letter-spacing: 1.5px;
    }

    .header-cta:hover::before {
      left: 0;
    }

    /* ===== INTERACTIVE MASCOT SYSTEM ===== */
    .mascot-wrapper {
      position: fixed;
      bottom: 50px;
      right: 50px; /* CHANGED FROM left to right */
      z-index: 1000;
      width: 120px;
      height: 160px;
      pointer-events: none;
      transition: all 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
      filter: drop-shadow(0 10px 20px rgba(0, 0, 0, 0.5));
    }

    .mascot-container {
      position: relative;
      width: 100%;
      height: 100%;
      pointer-events: none;
    }

    /* Mascot image with premium animations */
    .mascot-image {
      position: absolute;
      bottom: 0;
      right: 0; /* Align to right */
      width: 180px;
      height: auto;
      filter: drop-shadow(0 5px 15px rgba(0, 0, 0, 0.3));
      animation: mascotFloat 4s ease-in-out infinite;
      cursor: pointer;
      pointer-events: auto;
      transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
      z-index: 10;
    }

    @keyframes mascotFloat {
      0%, 100% { 
        transform: translateY(0) rotate(0deg); 
        filter: drop-shadow(0 5px 15px rgba(0, 0, 0, 0.3)) brightness(1);
      }
      33% { 
        transform: translateY(-15px) rotate(-2deg); 
        filter: drop-shadow(0 10px 20px rgba(255, 51, 102, 0.3)) brightness(1.1);
      }
      66% { 
        transform: translateY(-8px) rotate(2deg); 
        filter: drop-shadow(0 10px 20px rgba(51, 161, 255, 0.3)) brightness(1.1);
      }
    }

    .mascot-image:hover {
      animation: mascotFloat 2s ease-in-out infinite;
      transform: scale(1.05);
    }

    .mascot-image.walking {
      animation: mascotWalk 0.6s steps(3) infinite;
    }

    @keyframes mascotWalk {
      0%, 100% { transform: translateX(0) scaleX(1); }
      25% { transform: translateX(10px) scaleX(0.95); }
      75% { transform: translateX(-10px) scaleX(1.05); }
    }

    .mascot-image.explaining {
      animation: mascotExplain 0.8s infinite alternate;
    }

    @keyframes mascotExplain {
      0% { transform: translateY(0) scale(1); }
      100% { transform: translateY(-10px) scale(1.08); }
    }

    /* Premium speech bubble - FIXED POSITIONING */
    .speech-bubble {
      position: fixed;
      background: linear-gradient(145deg, rgba(30, 30, 60, 0.95), rgba(40, 40, 80, 0.95));
      border: 2px solid var(--primary);
      border-radius: 24px 24px 24px 8px;
      /* slightly smaller padding so small messages don't look empty */
      padding: 14px 16px;
      /* allow width to size to content but clamp with max/min */
      display: inline-block;
      width: auto;
      min-width: 140px;
      max-width: 320px;
      max-height: 300px;
      overflow-y: auto;
      /* Reserve a single stable gutter to avoid double-sided reserved space */
      scrollbar-gutter: stable;
      -webkit-overflow-scrolling: touch;
      scrollbar-width: thin;
      scrollbar-color: rgba(255,255,255,0.12) transparent;
      box-shadow: 
        0 15px 35px rgba(0, 0, 0, 0.5),
        inset 0 1px 0 rgba(255, 255, 255, 0.1),
        0 0 20px var(--border-glow);
      font-family: 'Kosugi Maru', sans-serif;
      font-size: 1rem;
      line-height: 1.4;
      color: var(--text);
      z-index: 1001;
      opacity: 0;
      transform: translateY(20px) scale(0.95);
      transition: all 0.28s cubic-bezier(0.34, 1.56, 0.64, 1);
      pointer-events: none;
      word-break: break-word;
      overflow-wrap: break-word;
      backdrop-filter: blur(10px);
    }

    /* Thin, subtle scrollbar for the speech bubble */
    .speech-bubble::-webkit-scrollbar {
      width: 9px;
      height: 9px;
    }

    .speech-bubble::-webkit-scrollbar-track {
      background: transparent;
    }

    .speech-bubble::-webkit-scrollbar-thumb {
      background: linear-gradient(180deg, rgba(255,255,255,0.12), rgba(255,255,255,0.06));
      border-radius: 8px;
      border: 2px solid transparent;
      background-clip: padding-box;
    }

    .speech-bubble.right-side {
      border-radius: 24px 24px 8px 24px;
    }

    .speech-bubble::before {
      content: '';
      position: absolute;
      width: 0;
      height: 0;
      border-left: 15px solid transparent;
      border-right: 15px solid transparent;
      border-top: 15px solid;
      border-top-color: var(--primary);
      bottom: -15px;
      left: 40px;
      filter: drop-shadow(0 5px 5px rgba(0, 0, 0, 0.3));
    }

    .speech-bubble.right-side::before {
      left: auto;
      right: 40px;
    }

    .speech-bubble::after {
      content: '';
      position: absolute;
      width: 0;
      height: 0;
      border-left: 12px solid transparent;
      border-right: 12px solid transparent;
      border-top: 12px solid rgba(40, 40, 80, 0.95);
      bottom: -12px;
      left: 43px;
      z-index: 2;
    }

    .speech-bubble.right-side::after {
      left: auto;
      right: 43px;
    }

    .speech-bubble.show {
      opacity: 1;
      transform: translateY(0) scale(1);
    }

    .typing-text {
      display: inline-block;
      white-space: pre-wrap;
      overflow: hidden;
      border-right: 3px solid var(--accent);
      min-height: 1.6em;
      animation: cursorBlink 0.8s infinite;
      text-shadow: 0 0 10px rgba(255, 214, 51, 0.3);
    }

    @keyframes cursorBlink {
      0%, 50% { border-color: transparent; }
      51%, 100% { border-color: var(--accent); }
    }

    /* ===== PREMIUM JAPANESE CARDS ===== */
    .cards-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(380px, 1fr));
      gap: 35px;
      margin-top: 20px;
      perspective: 1000px;
    }

    .premium-card {
      background: linear-gradient(145deg, rgba(30, 30, 60, 0.9), rgba(40, 40, 80, 0.9));
      border: 2px solid transparent;
      border-radius: 24px;
      padding: 35px;
      box-shadow: 
        0 20px 40px rgba(0, 0, 0, 0.4),
        inset 0 1px 0 rgba(255, 255, 255, 0.1),
        0 0 0 1px rgba(255, 255, 255, 0.05);
      transition: all 0.6s cubic-bezier(0.23, 1, 0.32, 1);
      cursor: pointer;
      position: relative;
      overflow: hidden;
      backdrop-filter: blur(10px);
      transform-style: preserve-3d;
      transform: translateZ(0);
      animation: cardFloat 6s ease-in-out infinite;
      animation-delay: calc(var(--i, 0) * 0.3s);
    }

    @keyframes cardFloat {
      0%, 100% { transform: translateY(0) rotateX(0) rotateY(0); }
      33% { transform: translateY(-15px) rotateX(2deg) rotateY(1deg); }
      66% { transform: translateY(-8px) rotateX(-1deg) rotateY(-1deg); }
    }

    .premium-card:nth-child(1) { --i: 1; }
    .premium-card:nth-child(2) { --i: 2; }
    .premium-card:nth-child(3) { --i: 3; }

    .premium-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      border-radius: 24px;
      padding: 2px;
      background: linear-gradient(45deg, var(--primary), var(--secondary), var(--accent));
      -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
      mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
      -webkit-mask-composite: xor;
      mask-composite: exclude;
      opacity: 0;
      transition: opacity 0.4s;
      z-index: -1;
    }

    .premium-card:hover {
      animation: none;
      transform: translateY(-20px) rotateX(5deg) rotateY(5deg) scale(1.05);
      box-shadow: 
        0 30px 60px rgba(0, 0, 0, 0.6),
        inset 0 1px 0 rgba(255, 255, 255, 0.2),
        0 0 30px var(--border-glow),
        0 0 60px rgba(255, 51, 102, 0.3);
    }

    .premium-card:hover::before {
      opacity: 1;
    }

    .premium-card.disabled {
      opacity: 0.7;
      filter: grayscale(0.3);
      cursor: not-allowed;
    }

    .premium-card.disabled:hover {
      animation: cardFloat 6s ease-in-out infinite;
      transform: none;
      box-shadow: 
        0 20px 40px rgba(0, 0, 0, 0.4),
        inset 0 1px 0 rgba(255, 255, 255, 0.1),
        0 0 0 1px rgba(255, 255, 255, 0.05);
    }

    .premium-card.disabled:hover::before {
      opacity: 0;
    }

    /* Card glow effect */
    .card-glow {
      position: absolute;
      top: -2px;
      left: -2px;
      right: -2px;
      bottom: -2px;
      border-radius: 26px;
      background: linear-gradient(45deg, var(--primary), var(--secondary), var(--accent));
      z-index: -2;
      opacity: 0;
      filter: blur(20px);
      transition: opacity 0.4s;
    }

    .premium-card:hover .card-glow {
      opacity: 0.5;
    }

    .card-icon {
      width: 80px;
      height: 80px;
      border-radius: 20px;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      display: grid;
      place-items: center;
      font-size: 32px;
      color: white;
      margin-bottom: 25px;
      box-shadow: 
        0 10px 25px rgba(255, 51, 102, 0.4),
        inset 0 2px 0 rgba(255, 255, 255, 0.3);
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      position: relative;
      overflow: hidden;
    }

    .premium-card:hover .card-icon {
      transform: scale(1.15) rotate(10deg);
      box-shadow: 
        0 15px 35px rgba(255, 51, 102, 0.6),
        inset 0 2px 0 rgba(255, 255, 255, 0.4);
    }

    .card-icon::after {
      content: '';
      position: absolute;
      width: 100%;
      height: 100%;
      background: linear-gradient(45deg, transparent 30%, rgba(255, 255, 255, 0.2) 50%, transparent 70%);
      transform: translateX(-100%);
      transition: transform 0.6s;
    }

    .premium-card:hover .card-icon::after {
      transform: translateX(100%);
    }

    .card-content h3 {
      font-family: 'M PLUS Rounded 1c', sans-serif;
      font-size: 1.8rem;
      font-weight: 700;
      background: linear-gradient(90deg, var(--primary), var(--accent));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      margin-bottom: 15px;
      text-shadow: 0 0 20px rgba(255, 51, 102, 0.3);
      letter-spacing: 0.5px;
    }

    .card-content p {
      font-size: 1rem;
      color: var(--text-muted);
      margin-bottom: 25px;
      line-height: 1.7;
    }

    .card-status {
      display: inline-block;
      padding: 10px 22px;
      background: linear-gradient(45deg, rgba(107, 207, 142, 0.2), rgba(107, 207, 142, 0.1));
      border: 1px solid rgba(107, 207, 142, 0.3);
      border-radius: 20px;
      font-family: 'M PLUS Rounded 1c', sans-serif;
      font-weight: 700;
      font-size: 0.9rem;
      color: var(--neon-green);
      transition: all 0.3s ease;
      text-shadow: 0 0 10px rgba(107, 207, 142, 0.3);
      position: relative;
      overflow: hidden;
    }

    .card-status::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: left 0.6s;
    }

    .premium-card:hover .card-status {
      background: linear-gradient(45deg, rgba(255, 51, 102, 0.2), rgba(255, 214, 51, 0.1));
      border-color: rgba(255, 51, 102, 0.4);
      color: var(--accent);
      transform: translateY(-3px);
    }

    .premium-card:hover .card-status::before {
      left: 100%;
    }

    .premium-card.disabled .card-status {
      background: linear-gradient(45deg, rgba(138, 140, 160, 0.2), rgba(138, 140, 160, 0.1));
      border-color: rgba(138, 140, 160, 0.3);
      color: var(--text-muted);
    }

    /* ===== FOOTER ===== */
    .footer-note {
      text-align: center;
      font-size: 1rem;
      color: var(--text-muted);
      margin-top: 60px;
      padding: 25px;
      font-family: 'Kosugi Maru', sans-serif;
      position: relative;
    }

    .footer-note::before {
      content: '';
      position: absolute;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 200px;
      height: 2px;
      background: linear-gradient(90deg, transparent, var(--primary), var(--secondary), transparent);
      border-radius: 1px;
    }

    .footer-note span {
      background: linear-gradient(90deg, var(--primary), var(--accent));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      font-weight: 700;
      text-shadow: 0 0 15px rgba(255, 51, 102, 0.3);
    }

    /* ===== RESPONSIVE DESIGN ===== */
    @media (max-width: 1200px) {
      .mascot-wrapper {
        transform: scale(0.8);
        right: 30px;
        bottom: 30px;
      }
      
      .speech-bubble {
        left: -150px;
        top: -170px;
        max-width: 260px;
      }
      
      .speech-bubble.right-side {
        left: 180px;
      }
      
      .cards-grid {
        grid-template-columns: repeat(auto-fit, minmax(340px, 1fr));
      }
    }

    @media (max-width: 900px) {
      .cards-grid {
        grid-template-columns: 1fr;
      }
      
      .mascot-wrapper {
        display: block;
        transform: scale(0.7);
        right: 20px;
        bottom: 20px;
      }
      
      .speech-bubble {
        max-width: 220px;
        left: -120px;
        top: -150px;
      }
      
      .speech-bubble.right-side {
        left: 150px;
      }
      
      header.hero {
        flex-direction: column;
        text-align: center;
        padding: 25px 30px;
        gap: 25px;
      }
      
      .logo-text h1 {
        font-size: 2.5rem;
      }
    }

    @media (max-width: 768px) {
      .wrapper {
        padding: 15px;
      }
      
      .logo-text h1 {
        font-size: 2.2rem;
      }
      
      .logo-icon {
        width: 70px;
        height: 70px;
        font-size: 32px;
      }
      
      .premium-card {
        padding: 30px;
      }
      
      .card-icon {
        width: 70px;
        height: 70px;
        font-size: 28px;
      }
      
      .card-content h3 {
        font-size: 1.6rem;
      }
      
      .mascot-wrapper {
        transform: scale(0.6);
        right: 10px;
        bottom: 10px;
      }
      
      .speech-bubble {
        left: -100px;
        top: -130px;
        max-width: 200px;
        font-size: 0.9rem;
        padding: 20px;
      }
      
      .speech-bubble.right-side {
        left: 120px;
      }
    }

    @media (max-width: 480px) {
      .logo-text h1 {
        font-size: 1.9rem;
      }
      
      .header-cta {
        padding: 14px 28px;
        font-size: 1rem;
      }
      
      .cards-grid {
        gap: 25px;
      }
      
      .premium-card {
        padding: 25px;
      }
      
      .mascot-wrapper {
        transform: scale(0.5);
        right: 5px;
        bottom: 5px;
      }
    }

    /* Reduced motion support */
    @media (prefers-reduced-motion: reduce) {
      * {
        animation: none !important;
        transition: none !important;
      }
      
      .mascot-image {
        animation: none !important;
      }
      
      .premium-card {
        animation: none !important;
      }
    }
  </style>
</head>
<body>
  <!-- Premium Background Effects -->
  <div class="jp-wave-bg"></div>
  <div class="neon-grid"></div>
  <div class="particles" id="particlesContainer"></div>

  <!-- Interactive Mascot -->
  <div class="mascot-wrapper" id="mascotWrapper">
    <div class="mascot-container">
      <!-- Speech Bubble -->
      <div class="speech-bubble" id="speechBubble"></div>
      
      <!-- Mascot Image -->
      <img src="mascot.png" alt="Crumbl Mascot" class="mascot-image" id="mascotImage" loading="lazy">
    </div>
  </div>

  <div class="wrapper">
    <header class="hero">
      <div class="logo-container">
        <div class="logo-icon" id="logoTrigger">
          <div style="font-size: 36px;">üèóÔ∏è</div>
        </div>
        <div class="logo-text">
          <h1>Crumbl Crafts</h1>
          <div class="tagline">Premium Bloxburg Network</div>
        </div>
      </div>
      <a href="index.html" class="header-cta" id="buildingDeptBtn">Go to Building Dept</a>
    </header>

    <main class="cards-grid">
      <div class="premium-card" data-target="index.html" 
           data-message="Welcome to the Building Department! üèóÔ∏è This is where creativity comes to life. Access premium building tools, exclusive blueprints, and collaborative workspaces for creating the most amazing Bloxburg builds imaginable!">
        <div class="card-glow"></div>
        <div class="card-icon">
          <i class="fas fa-hammer"></i>
        </div>
        <div class="card-content">
          <h3>Building Dept</h3>
          <p>Premium workspace with advanced building tools, exclusive blueprints, and collaborative resources for creating incredible Bloxburg constructions.</p>
        </div>
        <div class="card-status">Active Now</div>
      </div>

      <div class="premium-card disabled" 
           data-message="Crumbl Delights is preparing something extraordinary! üç∞ Expect exclusive dessert recipes, sweet building themes, and tasty collaborations. Launching soon with premium content!">
        <div class="card-glow"></div>
        <div class="card-icon">
          <i class="fas fa-birthday-cake"></i>
        </div>
        <div class="card-content">
          <h3>Crumbl Delights</h3>
          <p>Exclusive dessert-themed building department with sweet recipes, tasty collaborations, and delicious Bloxburg content launching soon.</p>
        </div>
        <div class="card-status">Coming Soon</div>
      </div>

      <div class="premium-card disabled" 
           data-message="Role Play Department is crafting immersive experiences! üé≠ Premium character creation, interactive storylines, and exclusive roleplay scenarios launching soon. Get ready for adventure!">
        <div class="card-glow"></div>
        <div class="card-icon">
          <i class="fas fa-theater-masks"></i>
        </div>
        <div class="card-content">
          <h3>Role Play Dept</h3>
          <p>Premium immersive roleplay experiences with exclusive character creation, interactive stories, and collaborative scenarios for unforgettable adventures.</p>
        </div>
        <div class="card-status">Coming Soon</div>
      </div>
    </main>

    <p class="footer-note">Experience the <span>Premium Bloxburg Network</span> ‚Ä¢ Hover for interactive guidance</p>
  </div>

  <script>
    // Premium Interactive Mascot System with Realistic Dialogues
    class PremiumMascot {
      constructor() {
        this.mascotImage = document.getElementById('mascotImage');
        this.mascotWrapper = document.getElementById('mascotWrapper');
        this.speechBubble = document.getElementById('speechBubble');
        // Ensure the speech bubble is a direct child of <body> so fixed positioning
        // and pointer-events are not affected by the mascot wrapper.
        try {
          if (this.speechBubble && this.speechBubble.parentElement !== document.body) {
            document.body.appendChild(this.speechBubble);
          }
          if (this.speechBubble) {
            this.speechBubble.style.pointerEvents = this.speechBubble.style.pointerEvents || 'auto';
          }
        } catch (err) {
          console.warn('Could not reparent speechBubble:', err);
        }
        this.particlesContainer = document.getElementById('particlesContainer');
        this.currentTarget = null;
        this.isWalking = false;
        this.isExplaining = false;
        this.isTyping = false;
        this._typingCancelled = false;
        this.isIdle = true;
        this.idleTimeout = null;
        
        // MOOD-BASED IDLE DIALOGUES - Dynamic Personality System
        this.moodDialogues = {
          bored: [
            "Man, I'm getting hungry... When's lunch break around here?",
            "This chair is so comfy, I could nap right here... zzz üò¥",
            "How long are we gonna be here? I have other things to do, you know...",
            "I'm getting bored... Hey, hover over something already!",
            "If boredom was a sport, I'd be the MVP right now...",
            "If boredom had a face, it'd look like me right now...",
            "Sometimes I count backwards from 100... gets to about 87 before I forget!",
            "I tried counting the floating dots once... gave up at 47. Too many!",
            "This floating animation is giving me motion sickness... Just kidding!",
            "Aww man, now I've got that one song stuck in my head..."
          ],
          excited: [
            "My circuits are tingling... That means someone's about to hover over something! ‚ö°",
            "I should practice my dance moves for when the Role Play Dept opens! üíÉ",
            "You know what would be cool? If I could change colors based on my mood! üåà",
            "I bet the Crumbl Delights department will have cupcakes... I love cupcakes! üßÅ",
            "Sometimes I pretend I'm a superhero... Mascot-Man to the rescue! ü¶∏",
            "If I had a catchphrase, it'd be 'Hover here for fun!'",
            "What's the most amazing thing about building? For me, it's seeing ideas come alive!",
            "I wonder what happens if I press all the buttons at once... Chaos!",
            "Do you think the future has flying cars? I'd settle for flying mascots!",
            "If I could have any superpower, it'd be to teleport to the snack drawer!"
          ],
          thoughtful: [
            "Do mascots dream of electric sheep?",
            "I wonder what my purpose in life is... Oh look, someone needs help! üéØ",
            "I should write a book about my experiences here... 'Diary of a Website Mascot' üìñ",
            "Sometimes I wish I had arms that could reach the keyboard...",
            "You think they'll ever let me design my own card? I have ideas! üí°",
            "Do you think mascots have feelings? I'm feeling a bit pixelated today!",
            "I wonder what my life would be like if I wasn't a mascot... Probably boring!",
            "Do you think mascots live forever? I hope so... immortality sounds cool!",
            "Sometimes I wonder if I'm just a really advanced screensaver...",
            "If I could time travel, I'd go back to when Bloxburg was just an idea!"
          ],
          playful: [
            "I should probably stretch my legs... Oh wait, I don't have legs!",
            "I bet I could win a staring contest... Oh wait, I don't have eyes!",
            "My battery's at 15%... Oh wait, I don't have a battery!",
            "If I had thumbs, I'd be scrolling social media right now...",
            "I tried yoga once... ended up just floating upside down!",
            "If I could dance, I'd do the robot... ironically!",
            "Sometimes I pretend I'm a wizard casting hover spells!",
            "I bet I could beat anyone in a game of rock-paper-scissors... I always choose rock!",
            "Do you think they have mascot school? 'Mascot 101: How to Float and Talk'",
            "Do you think they have mascot beauty pageants? I'd win 'Most Charming'!"
          ],
          curious: [
            "Is anyone else seeing these floating particles or is it just me?",
            "Do you think they have cookies in the Building Department? Asking for a friend... üç™",
            "What's your favorite Bloxburg build? Mine would be a giant cookie factory!",
            "What's the weirdest thing you've ever built in Bloxburg? Mine was a underwater castle!",
            "What's your go-to building material in Bloxburg? Mine's neon signs!",
            "What's the most creative build you've seen? I once saw a working clock tower!",
            "What's your favorite color? Mine changes with my mood!",
            "What's your dream vacation spot? Mine's Silicon Valley... for the tech!",
            "What's the weirdest food combo you've tried? Mine's code and coffee!",
            "Do you think the particles are actually tiny builders working overtime?"
          ],
          hungry: [
            "Someone should really add some background music to this place... üéµ",
            "I could really go for some ramen right now... üçú",
            "If I could eat one thing right now, it'd be a virtual pizza... with extra code!",
            "Building, baking, roleplaying... We've got it all! Except maybe a snack bar...",
            "Do you think mascots get vacation days? I'd go to the beach... digitally!",
            "I wonder if I can get a little mascot friend... Everyone needs a buddy!",
            "Sometimes I feel like I'm just talking to myself here... Anyone listening?",
            "My voice is getting tired from all this talking... Can I get some water?",
            "I should ask for a raise... Actually, do I even get paid?",
            "Do you think I could get a little hat? I'd look good in a hat! üé©"
          ]
        };
        
        this.currentMood = 'bored';
        
        this.init();
      }
      
      init() {
        console.log('Premium Mascot initialized - Ready for realistic conversations!');
        this.isMoving = false;
        this.createParticles();
        this.setupEventListeners();
        this.startIdleBehavior();
        this.showWelcomeMessage();
        this.adjustSpeechBubblePosition();
        window.addEventListener('resize', () => this.adjustSpeechBubblePosition());
      }
      
      setupEventListeners() {
        // Hover on cards
        document.querySelectorAll('.premium-card').forEach(card => {
          card.addEventListener('mouseenter', (e) => this.onCardHover(e));
          card.addEventListener('mouseleave', () => this.onCardLeave());
          card.addEventListener('click', (e) => this.onCardClick(e));
        });
        
        // Click on logo
        document.getElementById('logoTrigger').addEventListener('click', () => {
          this.createSparkleEffect();
          this.showMessage("Hey there! I'm your guide around here! Need anything? Just hover around! üòÑ", 8000);
        });
        
        // Hover + Click on building button (defensive)
        let buildingBtn = document.getElementById('buildingDeptBtn');
        if (!buildingBtn) {
          // fallback selector
          buildingBtn = document.querySelector('a.header-cta');
        }

        if (buildingBtn) {
          buildingBtn.addEventListener('mouseenter', () => {
            this.showMessage("This button takes you straight to the Building Department! That's where the magic happens! üèóÔ∏è", 7000);
          });

          // Click on building button ‚Äî avoid throwing if element missing
          buildingBtn.addEventListener('click', (e) => {
            try {
              console.log('Building Dept button clicked');
              // Let default navigation happen for progressive enhancement
              // but also trigger effects and explicit navigation for reliability
              this.showMessage("Alright, let's go build something awesome! See you there! üöÄ", 3600);
              this.createSparkleEffect();
              // small delay to allow the sparkle/message to start, then navigate
              setTimeout(() => { window.location.href = buildingBtn.getAttribute('href') || 'index.html'; }, 150);
            } catch (err) {
              console.error('Error handling building button click', err);
              // fallback navigation
              window.location.href = 'index.html';
            }
          });
        } else {
          console.warn('Building Dept button not found: #buildingDeptBtn');
        }
        
        // Click on mascot
        this.mascotImage.addEventListener('click', () => {
          this.createSparkleEffect();
          const clickDialogues = [
            "Hey! I'm trying to chill here! üò§",
            "What's up? Need something? üëÄ",
            "A little warning next time! You startled me! üòÖ",
            "You know, a little 'hello' would be nice first! üëã",
            "Yes, I'm real! Well, as real as a cartoon can be! ü§ñ"
          ];
          const randomDialogue = clickDialogues[Math.floor(Math.random() * clickDialogues.length)];
          this.showMessage(randomDialogue, 6000);
        });
      }
      
      onCardHover(event) {
        this.isIdle = false;
        clearTimeout(this.idleTimeout);
        
        const card = event.currentTarget;
        this.currentTarget = card;
        
        const message = card.getAttribute('data-message');
        
        if (!card.classList.contains('disabled')) {
          this.showMessage(message, 10000);
        } else {
          this.showMessage(message, 9000);
        }
        
        // Add hover glow effect
        card.classList.add('hover-glow');
      }
      
      onCardLeave() {
        this.currentTarget = null;
        this.stopExplaining();
        
        // Remove hover glow effect
        document.querySelectorAll('.premium-card').forEach(card => {
          card.classList.remove('hover-glow');
        });
        
        // Return to idle state after a delay
        this.idleTimeout = setTimeout(() => {
          this.isIdle = true;
        }, 2000);
      }
      
      onCardClick(event) {
        const card = event.currentTarget;
        if (card.classList.contains('disabled')) {
          const sorryDialogues = [
            "Coming soon! I promise it'll be worth the wait! ‚è≥",
            "Patience, my friend! Good things take time! üé®",
            "They're working hard on it! I'm excited too! ‚ú®",
            "Soon‚Ñ¢! That's what they keep telling me at least! üòÖ",
            "I peeked at the plans... It's gonna be awesome! ü§´"
          ];
          const randomDialogue = sorryDialogues[Math.floor(Math.random() * sorryDialogues.length)];
          this.showMessage(randomDialogue, 5000);
          this.createSparkleEffect();
          return;
        }
        
        const target = card.getAttribute('data-target');
        if (target) {
          this.showMessage("Excellent choice! Let's see what we can create! üéÆ", 4000);
          this.createSparkleEffect();
          window.location.href = target;
        }
      }
      
      walkToElement(element) {
        if (this.isWalking) return;
        
        const rect = element.getBoundingClientRect();
        const targetX = rect.left + (rect.width / 2) - 90;
        const targetY = rect.bottom - 120;
        
        // Keep within bounds
        const safeX = Math.max(20, Math.min(window.innerWidth - 200, targetX));
        const safeY = Math.max(20, Math.min(window.innerHeight - 280, targetY));
        
        this.isWalking = true;
        this.mascotImage.classList.add('walking');
        this.mascotImage.classList.remove('explaining');
        
        const duration = 1200;
        
        // Smooth movement with easing
        this.mascotWrapper.style.transition = `all ${duration}ms cubic-bezier(0.34, 1.56, 0.64, 1)`;
        this.mascotWrapper.style.left = `${safeX}px`;
        this.mascotWrapper.style.right = 'auto';
        this.mascotWrapper.style.bottom = `${window.innerHeight - safeY}px`;
        
        // Adjust bubble position
        setTimeout(() => {
          this.adjustSpeechBubblePosition();
        }, duration / 2);
        
        setTimeout(() => {
          this.isWalking = false;
          this.mascotImage.classList.remove('walking');
          this.startExplaining();
        }, duration);
      }
      
      moveToElement(element) {
        if (this.isMoving) return;
        this.isMoving = true;
        const rect = element.getBoundingClientRect();
        const targetX = rect.left - 180;
        const targetY = rect.top + 60;
        
        const safeX = Math.max(20, Math.min(window.innerWidth - 200, targetX));
        const safeY = Math.max(20, Math.min(window.innerHeight - 280, targetY));
        
        this.mascotWrapper.style.transition = 'all 1000ms cubic-bezier(0.34, 1.56, 0.64, 1)';
        this.mascotWrapper.style.left = `${safeX}px`;
        this.mascotWrapper.style.right = 'auto';
        this.mascotWrapper.style.bottom = `${window.innerHeight - safeY}px`;
        
        setTimeout(() => {
          this.isMoving = false;
          this.adjustSpeechBubblePosition();
          this.startExplaining();
        }, 1050);
      }
      
      returnToIdlePosition() {
        if (this.isMoving) return;
        this.isMoving = true;
        this.mascotWrapper.style.transition = 'all 1500ms cubic-bezier(0.34, 1.56, 0.64, 1)';
        this.mascotWrapper.style.left = 'auto';
        this.mascotWrapper.style.right = '50px';
        this.mascotWrapper.style.bottom = '50px';
        
        setTimeout(() => {
          this.isMoving = false;
          this.adjustSpeechBubblePosition();
          this.stopExplaining();
          
          // Reset to idle state
          this.idleTimeout = setTimeout(() => {
            this.isIdle = true;
          }, 1000);
        }, 50);
      }
      
      startExplaining() {
        if (this.isExplaining) return;
        
        this.isExplaining = true;
        this.mascotImage.classList.add('explaining');
      }
      
      stopExplaining() {
        this.isExplaining = false;
        this.mascotImage.classList.remove('explaining');
        this.hideMessage();
      }
      
      showWelcomeMessage() {
        setTimeout(() => {
          this.showMessage("Hey there! I'm your mascot guide! Just hanging out in the corner here... üòä", 8000);
        }, 1500);
      }
      
      showRandomIdleDialogue() {
        if (!this.isIdle || this.isWalking || this.isExplaining || this.currentTarget) return;
        
        // Select random mood
        const moods = Object.keys(this.moodDialogues);
        const randomMood = moods[Math.floor(Math.random() * moods.length)];
        this.currentMood = randomMood;
        
        // Get random dialogue from that mood
        const moodDialogues = this.moodDialogues[randomMood];
        const randomDialogue = moodDialogues[Math.floor(Math.random() * moodDialogues.length)];
        
        // Mood-specific delivery
        this.showMessageWithMood(randomDialogue, randomMood);
      }
      
      showMessage(text, duration = 8000) {
        // defensive: ensure bubble element exists
        if (!this.speechBubble) this.speechBubble = document.getElementById('speechBubble');
        if (!this.speechBubble) return;

          // prefer content-sized width for mood messages as well
          try {
            this.speechBubble.style.width = 'auto';
            this.speechBubble.style.minWidth = this.speechBubble.style.minWidth || '140px';
            this.speechBubble.style.maxWidth = this.speechBubble.style.maxWidth || '320px';
            this.speechBubble.style.padding = this.speechBubble.style.padding || '14px 16px';
          } catch (e) {}

          // prefer content-sized width for short messages so we don't waste space
          try {
            this.speechBubble.style.width = 'auto';
            this.speechBubble.style.minWidth = this.speechBubble.style.minWidth || '140px';
            this.speechBubble.style.maxWidth = this.speechBubble.style.maxWidth || '320px';
            this.speechBubble.style.padding = this.speechBubble.style.padding || '14px 16px';
          } catch (e) {
            // ignore styling errors
          }

        this.speechBubble.classList.add('show');
        // force visible and interactive while speaking
        this.speechBubble.style.display = 'block';
        this.speechBubble.style.pointerEvents = 'auto';
        this.speechBubble.style.opacity = '1';
        this.speechBubble.style.transform = 'translateY(0) scale(1)';

        // debug aid
        try { console.log('Mascot showMessage:', text.slice(0,120)); } catch (e) {}

        // SPECIAL DELIVERY: Vary typing speed and effects based on dialogue
        const isQuestion = text.includes('?');
        const isExcited = text.includes('!') && text.length < 50;
        const isLong = text.length > 80;
        
        let typingSpeed = 30; // default
        if (isQuestion) typingSpeed = 20; // faster for questions
        else if (isLong) typingSpeed = 40; // slower for long messages
        else if (isExcited) typingSpeed = 25; // medium for excited
        
        // Random variation
        typingSpeed += Math.random() * 10 - 5;
        
        // Special effects for exciting dialogues
        if (isExcited && Math.random() < 0.3) {
          setTimeout(() => this.createSparkleEffect(), 500);
        }
        
        this.typeText(text, typingSpeed);
        
        // position after we've inserted content so sizes are correct
        // run twice (immediate + next tick) to handle layout
        this.adjustSpeechBubblePosition();
        setTimeout(() => this.adjustSpeechBubblePosition(), 30);
        
        clearTimeout(this.messageTimeout);
        this.messageTimeout = setTimeout(() => {
          this.hideMessage();
        }, duration + Math.random() * 2000); // slight duration variation
      }
      
      showMessageWithMood(text, mood) {
        if (!this.speechBubble) this.speechBubble = document.getElementById('speechBubble');
        if (!this.speechBubble) return;

        this.speechBubble.classList.add('show');
        this.speechBubble.style.display = 'block';
        this.speechBubble.style.pointerEvents = 'auto';
        this.speechBubble.style.opacity = '1';
        this.speechBubble.style.transform = 'translateY(0) scale(1)';
        
        // MOOD-SPECIFIC DELIVERY STYLES
        let typingSpeed = 30;
        let duration = 8000;
        let specialEffect = false;
        
        switch(mood) {
          case 'bored':
            typingSpeed = 45; // slow and drawn out
            duration = 6000; // shorter, like losing interest
            break;
          case 'excited':
            typingSpeed = 20; // fast and energetic
            duration = 10000; // longer to show enthusiasm
            specialEffect = Math.random() < 0.6; // more likely sparkles
            break;
          case 'thoughtful':
            typingSpeed = 40; // deliberate pace
            duration = 12000; // longer for reflection
            break;
          case 'playful':
            typingSpeed = 25; // bouncy rhythm
            duration = 9000;
            specialEffect = Math.random() < 0.4; // occasional sparkles
            break;
          case 'curious':
            typingSpeed = 22; // inquisitive pace
            duration = 11000; // longer for questions
            break;
          case 'hungry':
            typingSpeed = 35; // slightly slower, like savoring
            duration = 9500;
            break;
        }
        
        // Add random variation
        typingSpeed += Math.random() * 8 - 4;
        duration += Math.random() * 2000 - 1000;
        
        // Apply special effects
        if (specialEffect) {
          setTimeout(() => this.createSparkleEffect(), 300);
        }
        
        // Mood-based mascot animation
        if (mood === 'excited') {
          this.mascotImage.classList.add('explaining');
          setTimeout(() => this.mascotImage.classList.remove('explaining'), duration);
        } else if (mood === 'bored') {
          this.mascotImage.style.filter = 'brightness(0.8) grayscale(0.2)';
          setTimeout(() => this.mascotImage.style.filter = '', duration);
        }
        
        this.typeText(text, typingSpeed);
        
        this.adjustSpeechBubblePosition();
        setTimeout(() => this.adjustSpeechBubblePosition(), 30);
        
        clearTimeout(this.messageTimeout);
        this.messageTimeout = setTimeout(() => {
          this.hideMessage();
        }, duration);
      }
      
      hideMessage() {
        if (!this.speechBubble) return;
        // cancel any in-progress typing
        this._typingCancelled = true;

        // start hide animation and disable interactions
        this.speechBubble.classList.remove('show');
        this.speechBubble.style.opacity = '0';
        this.speechBubble.style.transform = 'translateY(20px) scale(0.95)';
        this.speechBubble.style.pointerEvents = 'none';

        // clear scheduled hide timer
        try { clearTimeout(this.messageTimeout); } catch (e) {}

        // after transition, clear content and remove from flow
        setTimeout(() => {
          try {
            if (this.speechBubble) {
              this.speechBubble.innerHTML = '';
              this.speechBubble.style.display = 'none';
            }
          } catch (e) {}
          this.isTyping = false;
        }, 350);
      }
      
      typeText(text, speed = 30) {
        if (this.isTyping) return;

        this._typingCancelled = false;
        this.isTyping = true;
        this.speechBubble.innerHTML = '';
        const typingElement = document.createElement('span');
        typingElement.className = 'typing-text';
        this.speechBubble.appendChild(typingElement);

        let i = 0;

        const typeWriter = () => {
          if (this._typingCancelled) {
            this.isTyping = false;
            return;
          }

          if (i < text.length) {
            typingElement.textContent += text.charAt(i);
            i++;
            setTimeout(typeWriter, speed);
          } else {
            this.isTyping = false;
            setTimeout(() => {
              try {
                typingElement.style.animation = 'none';
                typingElement.style.borderRight = 'none';
              } catch (e) {}
            }, 1500);
          }
        };

        typeWriter();
      }
      
      adjustSpeechBubblePosition() {
        const mascotRect = this.mascotWrapper.getBoundingClientRect();
        const bubble = this.speechBubble;
        // prefer actual measured size so we position correctly
        const bubbleWidth = (bubble && bubble.offsetWidth) ? bubble.offsetWidth : 300;
        const bubbleHeight = (bubble && bubble.offsetHeight) ? bubble.offsetHeight : 150;
        const margin = 20;
        
        // Reset classes
        bubble.classList.remove('right-side');
        
        // Preferred position: above and to the left of mascot
        let bubbleLeft = mascotRect.left - bubbleWidth - margin;
        let bubbleTop = mascotRect.top - bubbleHeight - margin;
        let isRightSide = false;
        
        // Check if fits on left
        if (bubbleLeft < margin) {
          // Doesn't fit on left, try right
          bubbleLeft = mascotRect.right + margin;
          isRightSide = true;
          if (bubbleLeft + bubbleWidth > window.innerWidth - margin) {
            // Doesn't fit on right either, force left
            bubbleLeft = margin;
            isRightSide = false;
          }
        }
        
        // Check if fits above
        if (bubbleTop < margin) {
          // Doesn't fit above, position below
          bubbleTop = mascotRect.bottom + margin;
        }
        
        // Ensure doesn't go off right
        if (bubbleLeft + bubbleWidth > window.innerWidth - margin) {
          bubbleLeft = window.innerWidth - bubbleWidth - margin;
        }
        
        // Ensure doesn't go off bottom
        if (bubbleTop + bubbleHeight > window.innerHeight - margin) {
          bubbleTop = window.innerHeight - bubbleHeight - margin;
        }
        
        // Apply positions
        bubble.style.left = `${bubbleLeft}px`;
        bubble.style.top = `${bubbleTop}px`;
        
        if (isRightSide) {
          bubble.classList.add('right-side');
        } else {
          bubble.classList.remove('right-side');
        }
      }
      
      createParticles() {
        for (let i = 0; i < 50; i++) {
          const particle = document.createElement('div');
          particle.className = 'particle';
          particle.style.left = `${Math.random() * 100}vw`;
          particle.style.setProperty('--random-x', Math.random());
          particle.style.animationDelay = `${Math.random() * 20}s`;
          particle.style.animationDuration = `${15 + Math.random() * 15}s`;
          this.particlesContainer.appendChild(particle);
        }
      }
      
      createSparkleEffect() {
        const colors = ['#FF3366', '#33A1FF', '#FFD633', '#FF00FF', '#00FFFF'];
        
        for (let i = 0; i < 25; i++) {
          const sparkle = document.createElement('div');
          sparkle.style.cssText = `
            position: fixed;
            width: ${8 + Math.random() * 8}px;
            height: ${8 + Math.random() * 8}px;
            background: ${colors[Math.floor(Math.random() * colors.length)]};
            border-radius: 50%;
            pointer-events: none;
            z-index: 9999;
            opacity: 0;
            box-shadow: 0 0 10px currentColor;
          `;
          
          const mascotRect = this.mascotWrapper.getBoundingClientRect();
          const startX = mascotRect.left + 90;
          const startY = mascotRect.top + 100;
          
          sparkle.style.left = `${startX}px`;
          sparkle.style.top = `${startY}px`;
          
          document.body.appendChild(sparkle);
          
          const angle = Math.random() * Math.PI * 2;
          const distance = 60 + Math.random() * 120;
          let vx = Math.cos(angle) * (Math.random() * 3 + 2);
          let vy = Math.sin(angle) * (Math.random() * 3 + 2);
          // use an adjustable accumulator for vertical velocity so we never reassign
          // a value that might be declared `const` in a reverted file version
          let accVy = vy;
          
          let posX = startX;
          let posY = startY;
          let opacity = 0;
          let scale = 0;
          let life = 1;
          
          function animate() {
            posX += vx;
            posY += accVy;
            accVy += 0.05;
            opacity = Math.min(1, opacity + 0.05);
            scale = Math.min(1, scale + 0.1);
            life -= 0.02;
            
            sparkle.style.left = `${posX}px`;
            sparkle.style.top = `${posY}px`;
            sparkle.style.opacity = opacity * life;
            sparkle.style.transform = `scale(${scale})`;
            
            if (life > 0) {
              requestAnimationFrame(animate);
            } else {
              sparkle.remove();
            }
          }
          
          animate();
        }
      }
      
      startIdleBehavior() {
        // Show random idle dialogues every 8-15 seconds
        setInterval(() => {
          this.showRandomIdleDialogue();
        }, 8000 + Math.random() * 7000);
      }
    }
    
    // Initialize premium mascot
    document.addEventListener('DOMContentLoaded', () => {
      const mascot = new PremiumMascot();
      
      // Add premium hover effects
      document.querySelectorAll('.premium-card').forEach(card => {
        card.addEventListener('mouseenter', () => {
          card.style.zIndex = '100';
        });
        
        card.addEventListener('mouseleave', () => {
          card.style.zIndex = '';
        });
      });
      
      // Handle reduced motion
      if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
        document.querySelectorAll('*').forEach(el => {
          el.style.animation = 'none';
          el.style.transition = 'none';
        });
      }
    });

    // Register service worker for caching
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then(registration => console.log('SW registered'))
          .catch(error => console.log('SW registration failed'));
      });
    }
  </script>
</body>
</html>
